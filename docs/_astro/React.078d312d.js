import{r as d}from"./index.ed373d49.js";var g={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T=d,S=Symbol.for("react.element"),k=Symbol.for("react.fragment"),w=Object.prototype.hasOwnProperty,O=T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I={key:!0,ref:!0,__self:!0,__source:!0};function j(l,s,i){var o,a={},u=null,c=null;i!==void 0&&(u=""+i),s.key!==void 0&&(u=""+s.key),s.ref!==void 0&&(c=s.ref);for(o in s)w.call(s,o)&&!I.hasOwnProperty(o)&&(a[o]=s[o]);if(l&&l.defaultProps)for(o in s=l.defaultProps,s)a[o]===void 0&&(a[o]=s[o]);return{$$typeof:S,type:l,key:u,ref:c,props:a,_owner:O.current}}p.Fragment=k;p.jsx=j;p.jsxs=j;g.exports=p;var t=g.exports;const x="todomvc";function R(){const[l,s]=d.useState(JSON.parse(localStorage.getItem(x)??"[]")),[i,o]=d.useState("all"),[a,u]=d.useState(),c=d.useMemo(()=>l.filter(e=>!e.completed).length,[l]),h=d.useMemo(()=>i==="all"?[...l]:i==="active"?l.filter(e=>!e.completed):i==="completed"?l.filter(e=>e.completed):[],[l,i]);return d.useEffect(()=>localStorage.setItem(x,JSON.stringify(l)),[l]),d.useEffect(()=>(globalThis.addEventListener("hashchange",f),()=>globalThis.removeEventListener("hashchange",f))),t.jsxs("section",{className:"todoapp",children:[t.jsxs("header",{className:"header",children:[t.jsx("h1",{children:"todos"}),t.jsx("input",{className:"new-todo",autoFocus:!0,placeholder:"What needs to be done?",onKeyUp:v})]}),!!h.length&&t.jsxs("section",{className:"main",children:[t.jsx("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",checked:c===0,onChange:N}),t.jsx("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),t.jsx("ul",{className:"todo-list",children:h.map(e=>t.jsxs("li",{className:["todo",e.completed?"completed":"",a===e.id?"editing":""].join(" "),children:[t.jsxs("div",{className:"view",children:[t.jsx("input",{className:"toggle",type:"checkbox",checked:e.completed,onChange:()=>y(e.id)}),t.jsx("label",{onDoubleClick:()=>u(e.id),children:e.title}),t.jsx("button",{className:"destroy",onClick:()=>b(e.id)})]}),a===e.id&&t.jsx("input",{className:"edit",type:"text",defaultValue:e.title,onBlur:_,onKeyUp:C,ref:n=>Promise.resolve().then(()=>n?.focus())})]},e.id))})]}),!!l.length&&t.jsxs("footer",{className:"footer",children:[t.jsxs("span",{className:"todo-count",children:[t.jsx("strong",{children:c}),t.jsxs("span",{children:[" item",c>1&&"s"," left"]})]}),t.jsxs("ul",{className:"filters",children:[t.jsx("li",{children:t.jsx("a",{href:"#/all",className:i==="all"?"selected":"",children:"All"})}),t.jsx("li",{children:t.jsx("a",{href:"#/active",className:i==="active"?"selected":"",children:"Active"})}),t.jsx("li",{children:t.jsx("a",{href:"#/completed",className:i==="completed"?"selected":"",children:"Completed"})})]}),c<l.length&&t.jsx("button",{className:"clear-completed",onClick:E,children:"Clear completed"})]})]});function v({key:e,target:n}){if(e.toLowerCase()!=="enter"||!n)return;const r=n;r.value&&(s([...l,{id:String(Date.now()),title:r.value,completed:!1}]),r.value="")}function N(){s(l.map(e=>({...e,completed:c!==0})))}function y(e){s(l.map(n=>n.id===e?{...n,completed:!n.completed}:n))}function b(e){s(l.filter(n=>n.id!==e))}function _({target:e}){const n=e,r=l.findIndex(m=>m.id===a);r!==-1&&(l[r].title=n.value,s(l),u(void 0))}function C({key:e,target:n}){const r=n;if(e.toLowerCase()==="enter"){r.blur();return}if(e.toLowerCase()==="escape"){r.value=l.find(m=>m.id===a)?.title??r.value,r.blur();return}}function E(){s(l.filter(e=>!e.completed))}function f(){const e=globalThis.location.hash.replace(/#\/?/,"");if(e==="all"||e==="active"||e==="completed"){o(e);return}globalThis.location.hash="",o("all")}}export{R as default};
